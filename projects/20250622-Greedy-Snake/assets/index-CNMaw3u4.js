(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))c(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&c(a)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function c(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}})();let e={head:{x:1,y:0},direction:"ArrowRight",switch:!1,isDead:!1,key:{ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"},score:0,level:1},i={x:9,y:9},r={food:document.querySelector(".food"),snake:document.querySelector(".snake"),snakeHead:document.querySelector(".snake-head"),snakeTail:document.querySelector(".snake div:last-child"),switch:document.querySelector("#switch")};function d(){e.isDead=!1,r.snake.innerHTML='<div class="snake-head"></div><div></div>',r.snakeHead=document.querySelector(".snake-head"),e.direction="ArrowRight",i.x=9,i.y=9,e.head.x=1,e.head.y=0,e.score=0,e.level=1,document.querySelector(".score span").innerHTML=e.score,document.querySelector(".level span").innerHTML=e.level,r.food.style.left=i.x+"rem",r.food.style.top=i.y+"rem",r.snakeHead.style.left=e.head.x+"rem",r.snakeHead.style.top=e.head.y+"rem"}function u(){i.x=Math.floor(Math.random()*20),i.y=Math.floor(Math.random()*20),r.food.style.left=i.x+"rem",r.food.style.top=i.y+"rem"}function f(){if(e.head.x===i.x&&e.head.y===i.y){e.score++,e.score%5===0&&(e.level++,document.querySelector(".level span").innerHTML=e.level),document.querySelector(".score span").innerHTML=e.score,u();const t=document.createElement("div");return r.snake.appendChild(t),!0}}function h(){const t=document.querySelectorAll(".snake>div");if(e.head.x<0||e.head.x>19||e.head.y<0||e.head.y>19)return e.switch=!1,e.isDead=!0,r.switch.innerHTML="开始",alert("蛇撞墙，游戏结束");for(let s=1;s<t.length-1;s++)if(e.head.x*16===t[s].offsetLeft&&e.head.y*16===t[s].offsetTop)return e.switch=!1,e.isDead=!0,r.switch.innerHTML="开始",alert("蛇撞到自己，游戏结束")}function y(){document.addEventListener("keydown",t=>{e.key[t.code]!==e.direction&&(e.direction=t.code)}),document.querySelector("#control ul").addEventListener("click",t=>{if(t.target.tagName==="BUTTON")switch(t.target.dataset.id){case"ArrowUp":e.direction!=="ArrowDown"&&(e.direction="ArrowUp");break;case"ArrowDown":e.direction!=="ArrowUp"&&(e.direction="ArrowDown");break;case"ArrowLeft":e.direction!=="ArrowRight"&&(e.direction="ArrowLeft");break;case"ArrowRight":e.direction!=="ArrowLeft"&&(e.direction="ArrowRight");break}}),document.addEventListener("keydown",t=>{e.key[t.code]!==e.direction&&(e.direction=t.code)}),setTimeout(function t(){if(e.switch){switch(e.direction){case"ArrowUp":e.head.y--;break;case"ArrowDown":e.head.y++;break;case"ArrowLeft":e.head.x--;break;case"ArrowRight":e.head.x++;break}f()||h(),r.snakeHead=document.querySelector(".snake-head"),r.snakeTail=document.querySelector(".snake div:last-child"),r.snakeHead.classList.remove("snake-head"),r.snakeTail.style.left=e.head.x+"rem",r.snakeTail.style.top=e.head.y+"rem",r.snake.insertAdjacentElement("afterbegin",r.snakeTail),r.snakeTail.classList.add("snake-head"),setTimeout(t,230-(e.level-1)*20)}},230)}function w(){d(),r.switch.addEventListener("click",()=>{e.isDead&&d(),e.switch=!e.switch,r.switch.innerHTML=e.switch?"暂停":"开始",e.switch&&y()})}w();
