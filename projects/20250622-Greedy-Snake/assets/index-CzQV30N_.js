(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))d(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&d(s)}).observe(document,{childList:!0,subtree:!0});function l(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function d(o){if(o.ep)return;o.ep=!0;const n=l(o);fetch(o.href,n)}})();let e={head:{x:1,y:0},direction:"ArrowRight",switch:!1,isDead:!1,key:{ArrowUp:"ArrowDown",ArrowDown:"ArrowUp",ArrowLeft:"ArrowRight",ArrowRight:"ArrowLeft"},score:0,level:1},i={x:9,y:9},t={food:document.querySelector(".food"),snake:document.querySelector(".snake"),snakeHead:document.querySelector(".snake-head"),snakeTail:document.querySelector(".snake div:last-child"),switch:document.querySelector("#switch")};function c(){e.isDead=!1,t.snake.innerHTML='<div class="snake-head"></div><div></div>',t.snakeHead=document.querySelector(".snake-head"),e.direction="ArrowRight",i.x=9,i.y=9,e.head.x=1,e.head.y=0,t.food.style.left=i.x+"rem",t.food.style.top=i.y+"rem",t.snakeHead.style.left=e.head.x+"rem",t.snakeHead.style.top=e.head.y+"rem"}function f(){i.x=Math.floor(Math.random()*20),i.y=Math.floor(Math.random()*20),t.food.style.left=i.x+"rem",t.food.style.top=i.y+"rem"}function u(){if(e.head.x===i.x&&e.head.y===i.y){e.score++,e.score%5===0&&(e.level++,document.querySelector(".level span").innerHTML=e.level),document.querySelector(".score span").innerHTML=e.score,f();const r=document.createElement("div");return t.snake.appendChild(r),!0}}function h(){const r=document.querySelectorAll(".snake>div");if(e.head.x<0||e.head.x>19||e.head.y<0||e.head.y>19)return e.switch=!1,e.isDead=!0,t.switch.innerHTML="开始",alert("蛇撞墙，游戏结束");for(let a=1;a<r.length-1;a++)if(e.head.x*16===r[a].offsetLeft&&e.head.y*16===r[a].offsetTop)return e.switch=!1,e.isDead=!0,t.switch.innerHTML="开始",alert("蛇撞到自己，游戏结束")}function y(){document.addEventListener("keydown",r=>{e.key[r.code]!==e.direction&&(e.direction=r.code)}),document.querySelector("#control ul").addEventListener("click",r=>{if(r.target.tagName==="BUTTON")switch(r.target.dataset.id){case"ArrowUp":e.direction!=="ArrowDown"&&(e.direction="ArrowUp");break;case"ArrowDown":e.direction!=="ArrowUp"&&(e.direction="ArrowDown");break;case"ArrowLeft":e.direction!=="ArrowRight"&&(e.direction="ArrowLeft");break;case"ArrowRight":e.direction!=="ArrowLeft"&&(e.direction="ArrowRight");break}}),document.addEventListener("keydown",r=>{e.key[r.code]!==e.direction&&(e.direction=r.code)}),setTimeout(function r(){if(e.switch){switch(e.direction){case"ArrowUp":e.head.y--;break;case"ArrowDown":e.head.y++;break;case"ArrowLeft":e.head.x--;break;case"ArrowRight":e.head.x++;break}u()||h(),t.snakeHead=document.querySelector(".snake-head"),t.snakeTail=document.querySelector(".snake div:last-child"),t.snakeHead.classList.remove("snake-head"),t.snakeTail.style.left=e.head.x+"rem",t.snakeTail.style.top=e.head.y+"rem",t.snake.insertAdjacentElement("afterbegin",t.snakeTail),t.snakeTail.classList.add("snake-head"),setTimeout(r,230-(e.level-1)*10)}},230)}function w(){c(),t.switch.addEventListener("click",()=>{e.isDead&&c(),e.switch=!e.switch,t.switch.innerHTML=e.switch?"暂停":"开始",e.switch&&y()})}w();
